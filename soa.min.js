var soa=function(e,r,t){if("object"!=typeof e)return ERR("need array type [ ] for arg1");if(void 0==e.length)return ERR("need array type [ ] for arg1");if(1==e[0].length)return e;if(!e[0])return ERR("need values for arg1");if(!r)return ERR("need key(string or array type) to sort for arg2");if("object"!=typeof e[0])return ERR("need object type { } inside the array [ ] for arg1");if("number"==typeof e[0].length)return ERR("need object type { } inside the array [ ] for arg1");if("string"!=typeof r&&"object"!=typeof r||"number"!=typeof r.length)return ERR("need string or array type for key(arg2)");if(void 0!==t&&"boolean"!=typeof t)return ERR("need boolean type for arg3");for(var n=[],o=0;o<e.length;o++)n.push(e[o]);r="string"==typeof r?[r]:r,t=t||!1;for(o=0;o<r.length;o++)"string"==typeof r[o]?r[o]=[r[o],t]:1==r[o].length&&(r[o][1]=t);for(var f=[],s=[],a=0;a<r.length;a++){if("string"!=typeof r[a][0])return ERR("need string type for key[i][0] to sort");if(0!==a&&0==f.length)return n;var i,u=r[a][1]?"desc":"asc",g=0,h=function(){return void 0==n[g][r[a][0]]?(g++,console.warn("undefined value for inserted key:"+r),h()):typeof n[g][r[a][0]]};i=h();for(o=0;o<n.length;o++)if(typeof n[o][r[a][0]]!==i){console.warn("different types of values for inserted key:"+r);break}if("number"==i)if(f.length)for(var p=s.length-1;p>=0;p--){var l=(y=n.splice(s[p][0])).splice(s[p][1]-s[p][0]+1);"asc"==u?y.sort(function(e,t){return e[r[a][0]]-t[r[a][0]]}):y.sort(function(e,t){return t[r[a][0]]-e[r[a][0]]}),n=n.concat(y,l)}else"asc"==u?n.sort(function(e,t){return e[r[a][0]]-t[r[a][0]]}):n.sort(function(e,t){return t[r[a][0]]-e[r[a][0]]});else{if("string"!=i)return ERR("Sorry, not supported yet");if(f.length)for(p=s.length-1;p>=0;p--){var y;l=(y=n.splice(s[p][0])).splice(s[p][1]-s[p][0]+1);"asc"==u?y.sort(function(e,t){var n=e[r[a][0]].toLowerCase(),o=t[r[a][0]].toLowerCase();return n<o?-1:n>o?1:0}):y.sort(function(e,t){var n=t[r[a][0]].toLowerCase(),o=e[r[a][0]].toLowerCase();return n<o?-1:n>o?1:0}),n=n.concat(y,l)}else"asc"==u?n.sort(function(e,t){var n=e[r[a][0]].toLowerCase(),o=t[r[a][0]].toLowerCase();return n<o?-1:n>o?1:0}):n.sort(function(e,t){var n=t[r[a][0]].toLowerCase(),o=e[r[a][0]].toLowerCase();return n<o?-1:n>o?1:0})}if(a==r.length-1)break;var c=[],d=!1;for(g=1;g<n.length;g++)n[g][r[a][0]]==n[g-1][r[a][0]]?0==a?(f.push(g-1),d=!0,g==n.length-1&&f.push(g)):(c.push(g-1),d=!0,g==n.length-1&&c.push(g)):(0==a&&d?f.push(g-1,void 0):d&&c.push(g-1,void 0),d=!1);if(0!==a){for(var v,R,b=[],w=!1,E=1;E<c.length;E++)c[E]===c[E-1]+1?(w||(v=c[E-1],w=!0),E==c.length-1&&(R=c[E],w=!1,b.push([v,R]))):w&&(R=c[E-1],w=!1,b.push([v,R]));for(var C=[],L=0;L<b.length;L++)for(p=0;p<s.length;p++)b[L][0]>=s[p][0]&&b[L][0]<=s[p][1]&&b[L][1]<=s[p][1]&&C.push(L);s=[];for(o=0;o<C.length;o++)s.push(b[C[o]])}if(0==a)for(var k,j,m=!1,A=1;A<f.length;A++)f[A]===f[A-1]+1?(m||(k=f[A-1],m=!0),A==f.length-1&&(j=f[A],m=!1,s.push([k,j]))):m&&(j=f[A-1],m=!1,s.push([k,j]))}return n};
